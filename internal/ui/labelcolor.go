package ui

import (
	"hash/fnv"
	"image/color"
)

// predefined palette of colors (Material Design)
var palette = []color.NRGBA{
	{0xF4, 0x43, 0x36, 0xFF}, // Red 500
	{0xE9, 0x1E, 0x63, 0xFF}, // Pink 500
	{0x9C, 0x27, 0xB0, 0xFF}, // Purple 500
	{0x67, 0x3A, 0xB7, 0xFF}, // Deep Purple 500
	{0x3F, 0x51, 0xB5, 0xFF}, // Indigo 500
	{0x21, 0x96, 0xF3, 0xFF}, // Blue 500
	{0x03, 0xA9, 0xF4, 0xFF}, // Light Blue 500
	{0x00, 0xBC, 0xD4, 0xFF}, // Cyan 500
	{0x00, 0x96, 0x88, 0xFF}, // Teal 500
	{0x4C, 0xAF, 0x50, 0xFF}, // Green 500
	{0x8B, 0xC3, 0x4A, 0xFF}, // Light Green 500
	{0xCD, 0xDC, 0x39, 0xFF}, // Lime 500
	{0xFF, 0xEB, 0x3B, 0xFF}, // Yellow 500
	{0xFF, 0xC1, 0x07, 0xFF}, // Amber 500
	{0xFF, 0x98, 0x00, 0xFF}, // Orange 500
	{0xFF, 0x57, 0x22, 0xFF}, // Deep Orange 500
	{0x79, 0x55, 0x48, 0xFF}, // Brown 500
	{0x9E, 0x9E, 0x9E, 0xFF}, // Grey 500
	{0x60, 0x7D, 0x8B, 0xFF}, // Blue Grey 500
	{0xFF, 0x80, 0xAB, 0xFF}, // Pink A200 (for 未分类)
}

// ColorForLabel 返回给定标签对应的固定颜色。
// 使用哈希确定索引，确保每个标签颜色固定且分布均匀。
func ColorForLabel(label string) color.Color {
	if label == "" {
		return palette[0]
	}
	if label == "未分类" {
		return palette[len(palette)-1]
	}
	h := fnv.New32a()
	_, _ = h.Write([]byte(label))
	idx := int(h.Sum32() % uint32(len(palette)))
	return palette[idx]
}
